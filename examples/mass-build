#!/bin/bash

=head1 NAME

mass-build - package Perl modules from certain authors

=head1 DESCRIPTION

Will go through a list of 800+ CPAN authors and try to package all of their modules.

=cut

# see http://jozef.kutej.net/2010/07/cpan-authors-sample.html how I got the list
for CPANID in AAR ABARCLAY ABH ABIGAIL ABLUM ABW ACOBURN ADAMK ADAMSON ADEO ADIE AEPAGE AFF AFN AGENT AGIERTH AGROLMS AGRUNDMA AGUL AIZVORSKI AJGOUGH AJPEACOCK AJUNG AKSTE ALEXMV ALEXP ALIAN ALLENDAY AMBS AMNESIAC AMS ANDK ANDREIN ANDREMAR ANDREWF ANDYA ANNO AORR APEIRON APERSAUD APLEINER APOCAL APPEL ARAK ARANDAL AREGGIORI AREIBENS ARISTOTLE ARJAY ARODLAND ARTHAS ARUNBEAR ASH ATOURBIN AUDREYT AUFFLICK AUTRIJUS AVAR AVIF AWESTHOLM AWRIGLEY AZAWAWI AZED BALDUR BARBIE BBB BBC BBEAUSEJ BBENNETT BBIRTH BCHOATE BDFOY BETTELLI BFAIST BHOLZMAN BIGJ BIGPRESH BINGOS BINKLEY BJKUIT BJOERN BLHOTSKY BLILBURNE BLOONIX BMC BOBTFISH BOOK BORISZ BORUP BOUMENOT BPEDERSE BPGN BPOSTLE BPOWERS BRAAM BRADFITZ BRAMBLE BRIANSKI BRICAS BRUCEK BRUMLEVE BSDZ BSUGARS BTROTT BURAK BUREADO BWARFIELD BZAJAC CADE CAPTTOFU CAUGUSTIN CBARRATT CCPRO CEBJYRE CERNEY CEVANS CFAERBER CFRANKS CFRETER CGILMORE CGRAU CHAMAS CHANG-LIU CHANSEN CHLIGE CHM CHOCOLATE CHOLET CHORNY CHROMATIC CHSTROSS CINE CJM CKERNER CKRAS CLACO CLAESJAC CLEISHMAN CLINTDW CLKAO CMOORE CMUNGALL CODECHILD CODEHELP COG CONKLIN COOK CORION CORLISS COSIMO COWENS CPB CRAKRJACK CRAZYDJ CREAMYG CRENZ CVICENTE CWEST CYING DAGOLDEN DAMOG DANBERR DANBOO DANIEL DANKOGAI DANPEDER DAPATRICK DARREN DAVEBAIRD DAVECROSS DAVIDCYL DBP DBRIAN DCANTRELL DCLINTON DCONWAY DCOPPIT DDICK DDUMONT DESPAIR DGOLD DHAGEMAN DIBERRI DIOCLES DJERIUS DJR DLAND DLUX DMAKI DMEGG DMOW DMUEY DOM DOMM DONEILL DORMANDO DOUGM DOUGW DOY DPARIS DPAVLIN DPRICE DROLSKY DRRHO DRTECH DSB DSCHWEI DSKOLL DSTAAL DSTUART DTOWN DTRISCHUK DUNCS DURIST DWHEELER DWRIGHT EBASSI EBHANSSEN EBOHLMAN ECALDER ECOCODE EDAVIS EDD EDECA EDPRATOMO EESTABROO EHOOD EIJABB EISEN ELIZABETH ELLIOTJS ELMEX ERYQ ESM ESSKAR ESUMMERS EVDB EVO EWILHELM EXIFTOOL EXOBUZZ EXODIST FANGLY FAYLAND FDALY FDESAR FERREIRA FERRENCY FGLOCK FIMM FITZNER FLETCH FLORA FLUFFY FOOF FOTANGO FRAJULAC FRANCKC FREQUENCY FREW FRODWITH FTASSIN FUSINV FVULTO FWILES GAAS GABOR GAISSMAI GAM GARNACHO GAVINC GBACON GBARR GBJK GBROWN GDSL GEOFFR GETTY GFUJI GGOEBEL GIRAFFED GLOVER GMCHARLT GMPASSOS GNUSTAVO GOMOR GPHAT GRAHAMC GRANTM GRICHTER GRODITI GROMMEL GSAR GTERMARS GUGOD GUIDO GUIMARD GWARD GWILLIAMS GWOLF GWYN GYEPI HACKER HANK HARDAKER HARTZELL HAYASHI HBENGEN HDIAS HEMBREED HINRIK HIO HMBRAND HORNBURG IAMCAL IAN IBB IGUTHRIE IKEBE ILMARI ILTZU ILYAM ILYAZ IMACAT IMALPASS INGY IROBERTS ISHIGAKI ISTERIN ITUB IVAN IVSOKOLOV IZUT JABLKO JALDHAR JAMADAM JAMES JAMESGOL JANPAZ JARW JASLONG JASONK JASONS JAW JAWNSY JAYBONCI JBAZIK JBISBEE JBURNETT JCZEUS JDHEDDEN JDPORTER JDUNCAN JEB JEF JEFFA JEFFMOCK JENDA JESSE JESUS JETTERO JEZRA JFITZ JGMYERS JGOLDBERG JGOULAH JHAR JHI JHOBLITT JHORWITZ JIMT JJNAPIORK JJORDAN JJORE JJSCHUTZ JKAMPHAUS JKEENAN JKIM JLAPEYRE JLATHAN JLAVOLD JMACFARLA JMCNAMARA JMEHNLE JMGDOC JMM JMORRIS JMS JNH JOESUF JOEY JONATHAN JOSEPHW JOSERODR JOSHUA JPEACOCK JPIERCE JPRIT JQUELIN JRED JRENNIE JREY JROBINSON JROCKWAY JROGERS JSHIRLEY JSIRACUSA JSMITH JSTENZEL JSTOWE JSWARTZ JUERD JV JWALT JWU JZUCKER KAKE KAMENSKY KANE KARASIK KASEI KAWASAKI KAZUHO KCK KCLARK KEN KENSHAN KENTNL KGALINSKY KGB KGRENNAN KILINRAX KIMRYAN KJOHNSON KMACLEOD KMELTZ KMX KNIGHT KNOK KOOS KORTY KRAEHE KRAIH KROKI KROW KRUSCOE KTHAKORE KUBOTA KURIANJA KWILLIAMS KWITKNR KWMAK LAMMEL LARRYSH LARSLUND LBAXTER LBROCARD LCONS LDACHARY LDS LEAKIN LEGART LEIFJ LEIRA LEMBARK LENDL LIMAONE LINDNER LLAP LMASARA LMC LUISMUNOZ LUKEC LUNARTEAR LUNATIC LUSOL LYOKATO MACGYVER MADGHOUL MAKAMAKA MAMAWE MANOWAR MANU MARCEL MARKJ MARKLE MARKOV MARKPF MARKSTOS MARKUSB MART MATISSE MATTIASH MATTLAW MAXB MBARBON MCAST MCMAHON MCNEWTON MDOOTSON MDXI MEHNER MERGL MERLYN MEWP MFROST MGRABNAR MHARNISCH MHOSKEN MHX MICB MIGO MIKEM MIKER MIKEWONG MILA MINGYILIU MIRK MIROD MISHIKAL MISHOO MIVKOVIC MIYAGAWA MIZZY MJCARMAN MJD MJEVANS MJEWELL MJP MKODERER MKUTTER MLEHMANN MMIMS MNAGUIB MNOONING MOCONNOR MOGAAL MORITZ MORTY MPIOTR MRA MRAMBERG MRASH MRDVT MROGASKI MRSAM MSCHILLI MSCHOUT MSCHWARTZ MSCHWERN MSERGEANT MSHELOR MSISK MSTEVENS MSTPLBG MSTROUT MTHURN MUIR MVERB MVORL MWARD MYSOCIETY NCLEATON NEELY NEILW NEVESENIN NEZUMI NI-S NICOLAW NIDS NIKC NIKIP NIKOLAY NJH NKH NKUITSE NOG NPEREZ NUFFIN NWETTERS NWIGER OALDERS OCTO OGASAWARA OLAF OLIMAUL OLIVER OLIVIERT OLLY OMEGA OPERA OVID PAJAS PALLOTRON PARDUS PAULG PCIMPRICH PDEEGAN PDENIS PDWARREN PEGI PENMA PEPE PERIGRIN PERRIN PERSICOM PETDANCE PETEF PETEK PEVANS PHAYLON PHISH PHOENIX PHRED PIJLL PINYAN PIP PJCJ PJF PKENT PLAVEN PLOBBES PMEVZEK PMH PMISON PMKANE PMQS PODMASTER POTYL PRATZLAFF PRAVUS PRBRENAN PRYAN PVANDRY RAM RANI RATCLIFFE RATTLER RAZINF RBERJON RBOW RBS RCAPUTO RCH RCLAMP RDB RDF REATMON REDTREE REHSACK RENEEB REYNOLDS RFRANKEL RGARCIA RGIERSIG RHANDOM RHANSON RIBASUSHI RIZEN RJBS RJOOP RJRAY RKHILL RKITOVER RKOBES RKRIMEN RMBARKER RMCFARLA ROAM ROBIN ROBM ROCKY ROKR ROLAND RONAN ROODE ROSCH ROSULEK RPETTETT RRA RRWO RSAVAGE RSCHUPP RSN RSOLIV RSPIER RUZ RVA RYBSKEJ SACAVILIA SALVA SAMPO SAMTREGAR SAMV SAPER SARTAK SBECK SBURKE SCANNELL SCHNUECK SCHUBIGER SCHWIGON SCOTT SCOTTW SCR SDOWD SERGEY SEWI SFINK SHERZODR SHEVEK SHLOMIF SIFUKURT SIMON SIMONFLK SIMONW SISYPHUS SIXAPART SJCARBON SJQUINNEY SJSZ SKA SLANNING SMCCAM SMCKAY SMRZ SMUELLER SNOWHARE SOENKE SONNEN SPADIX SPADKINS SPANG SPEEVES SPROUT SQUIRREL SREZIC SRSHAH SSCOTTO SSOTKA STBEY STEPHANB STEPHENCA STEVAN STEVE STEVENC STIGMATA STRUAN STRZELEC SUKRIA SULLR SUMMER SUNGO SUNNAVY SWALTERS SWHITAKER SWMCD SYP SZABGAB SZBALINT TAKERU TAKESHIGE TANIGUCHI TBONE TCHINCHOW TEEJAY TELS TEVERETT THALJEF THEPLER THINC THOR TIMA TIMB TIMBRODY TINITA TJENNESS TJMATHER TKURITA TLINDEN TMOERTEL TMONROE TMTM TMURRAY TNGUYEN TOBEYA TODDR TOKUHIROM TOMI TOMSON TOMZO TONVOON TONYC TPABA TPEDERSE TPG TREY TRIDDLE TRIPIE TSCH TSIBLEY TSUCCHI TURNERA TURNERJW TURNSTEP TVIERLING TWH TYEMQ TYPESTER ULPFR UMEMOTO UNOBE UNRTST URI VIDUL VIPUL VIY VPARSEVAL VPIT WADG WILLMOJG WINKO WITTEN WMCKEE WPMOORE WROSS WRW WYANT XERN XMATH XSAWYERX YANICK YANNK YENYA YEWENBIN YOSHIDA YUMPY YVES YVESAGO ZEFRAM ZENSPIDER ZEV; do

perl -MDebian::Apt::PM -MList::MoreUtils=uniq -MYAML -MApp::Cache -MCPAN -le \
        '$a=shift @ARGV or die; $p=Debian::Apt::PM->new(); $c=App::Cache->new(); do { local *STDOUT; $r = join "\n", grep { not $p->find($_) } grep { CPAN::Shell->expand("Module", $_) } uniq map { s/-/::/g; $_ } map { $_->{"name"} } map { eval { Load($_) } || {} } map { $c->get_url("http://cpan.inode.at/authors/id/".substr($a,0,1)."/".substr($a,0,2)."/$a/$_") } map { map { $_ =~ /\.meta$/ ? $_ : ()  } @{$_} } CPAN::Shell->expand("Author", $a)->ls;}; print $r if not $r ~~ ["perl", "mod_perl"];' \
        $CPANID \
        | while read M; do \
                dh-make-pm --no-retry --debian-version=1~dhmakepm --cpan $M; \
        done

done
